<html>
<head>
  <title>Evernote Export</title>
  <basefont face="Tahoma" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/309198 (en-US, DDL); Windows/10.0.0 (Win64);"/>
  <style>
    body, td {
      font-family: Tahoma;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="203902"/>

<div>
<span>
  <div style="--en-clipped-content:article; --en-clipped-source-url:https://raspberrypi.stackexchange.com/questions/85958/easy-backups-and-snapshots-of-a-running-system-with-lvm; --en-clipped-source-title:raspbian - Easy backups and snapshots of a running system with LVM - Raspberry Pi Stack Exchange;">
<div><br/></div><div style="min-height: 3720px; font-size: 16px; display: block; min-width: 100%; position: relative;"> <div style="color:rgb(0, 0, 0);font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="color:rgb(0, 0, 0);box-sizing:border-box;background-color:rgba(0, 0, 0, 0);font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;line-height:1;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><div style="box-sizing:inherit;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;line-height:22.5px;font-size:15px;overflow-wrap:break-word;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:22.5px;font-family:serif;font-size:15px;box-sizing:inherit;"></span>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>You can move the installation of the <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Raspberry Pi OS<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> to a LVM volume.<br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>
<strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>But what does it help me?<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<ol style="box-sizing:inherit;list-style-type:decimal;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;list-style:none;margin-top:0px;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;list-style:none;list-style-type:decimal;box-sizing:inherit;"></span>
<li style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:break-word;margin-bottom:8.25px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>You can take snapshots from your running system.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></li>
<li style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:break-word;margin-bottom:8.25px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>You can install software and if you don't like it you can revert to the snapshot.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></li>
<li style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:break-word;margin-bottom:8.25px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>If you like installed software you can commit the snapshot, in fact delete the snapshot.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></li>
<li style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:break-word;margin-bottom:8.25px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>It is very easy to make backups on the running system. Just make a snapshot, mount it and backup it, no worry about changing files from the running system.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></li>
<li style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:break-word;margin-bottom:0px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>You can heavy modify your system, also with drivers and firmware and deinstall essential software until it doesn't boot anymore (kernel panic, rainbow screen). It doesn't matter. You simply boot into the snapshot, means into the running system the snapshot was taken. Then you can revert to the snapshot.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></li>
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;list-style:none;list-style-type:decimal;box-sizing:inherit;"></span></ol>
<h2 style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-size:15px;margin-bottom:0.7em;margin-top:1.667em;font-weight:bold;"><span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span>Prepare the installation with LVM drivers<span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span></h2>
Moving the installation isn't the problem but the LVM drivers must be loaded on boot up so the root partition can be mounted and used for booting.  Fortunately the Raspberry Pi supports loading a ramdisk for `initrd` so we have to do an additional step to create the initram containing drivers for LVM.
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>The following is only for a quick setup an <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>initramfs<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> where you have to monitor kernel updates by yourself. To use a more automated setup an <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>initramfs<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> you can look at <a href="https://raspberrypi.stackexchange.com/a/92558/79866" style="box-sizing:inherit;user-select:auto;color:rgb(17, 146, 148);cursor:pointer;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;text-decoration:underline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span>How can I use an init ramdisk (initramfs) on boot up Raspberry Pi?<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span></a>.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>If you are unexperienced with linux please try it first with a new image how I did for this How To. You can loose all data.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>For reference I use <a href="https://downloads.raspberrypi.org/raspios_armhf/images/raspios_armhf-2020-08-24/" rel="nofollow noreferrer" style="box-sizing:inherit;user-select:auto;color:rgb(17, 146, 148);cursor:pointer;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;text-decoration:underline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span>Raspberry Pi OS (32-bit) with desktop  2020-08-20<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span></a>, flashed it to a SD Card and boot it in a RasPi. First do an upgrade to get the latest software versions and install drivers:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo -Es
rpi ~# apt update
rpi ~# apt full-upgrade
rpi ~# apt install initramfs-tools
rpi ~# apt install lvm2
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>I only use this installation on a RPi3 (incl. RPi3+) and a RPi4. Enable using an <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>initramfs<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> by settings in <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/boot/config.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>, but using the current kernel/module names. The current available kernel/module names you will find with, for example:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~# ls /lib/modules/
4.19.97+  4.19.97-v7+  4.19.97-v7l+  4.19.97-v8+
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>The following should be inserted at the top of <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/boot/config.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>. For further filter settings look at <a href="https://www.raspberrypi.org/documentation/configuration/config-txt/conditional.md" rel="nofollow noreferrer" style="box-sizing:inherit;user-select:auto;color:rgb(17, 146, 148);cursor:pointer;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;text-decoration:underline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span>Conditional filters in config.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span></a>.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>[pi3]
initramfs initrd.img-4.19.97-v7+ followkernel
[pi4]
initramfs initrd.img-4.19.97-v7l+ followkernel
# if you want to use the experimental 64 bit kernel, then enable this instead
#arm_64bit=1
#initramfs initrd.img-4.19.97-v8+ followkernel
[all]
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>I only want to load listed modules into the ramdisk, not all possible. We have to set option <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>list<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> in <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/etc/initramfs-tools/initramfs.conf<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~# sed -i 's/^MODULES=most/MODULES=list/' /etc/initramfs-tools/initramfs.conf
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>If you have trouble with drivers of your hardware with this setting, for example for a display, then you can <a href="https://raspberrypi.stackexchange.com/a/112429/79866" style="box-sizing:inherit;user-select:auto;color:rgb(17, 146, 148);cursor:pointer;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;text-decoration:underline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span>modify option MODULES for initramfs<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span></a>.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Now create the ramdisks. Because we create them on a <strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>fat<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong> filesystem (boot partition) you will get some warnings. <strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>fat<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong> does not support all options, but you can ignore the warnings.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~# mkinitramfs -o /boot/initrd.img-4.19.97-v7+ 4.19.97-v7+
rpi ~# mkinitramfs -o /boot/initrd.img-4.19.97-v7l+ 4.19.97-v7l+
rpi ~# apt clean
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Reboot. It should do it as always but now using the initram. Check with:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ journalctl -b | grep initr
Apr 17 11:20:38 raspberrypi kernel: Trying to unpack rootfs image as initramfs...
Apr 17 11:20:38 raspberrypi kernel: Freeing initrd memory: 13448K
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<h2 style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-size:15px;margin-bottom:0.7em;margin-top:1.667em;font-weight:bold;"><span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span><br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>Moving the Raspberry Pi OS to the LVM volume<span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span></h2>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Poweroff your system and attach its SD Card to a debian like computer. It must also have LVM2 installed (<code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>sudo apt install lvm2<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>) even you don't use it there. We need it to setup LVM on the SD Card. We will now backup the installation on the SD Card, create a logical volume (lv) there and restore it to the lv. I will create a volume of 6 GB. You can use what you like but leave enough space for snapshots. I suggest to start with minimal space because with LVM it is no problem to extend the volume at any time. My SD Card is attached to <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/dev/sdb<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Backup the Raspberry Pi OS<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>pc ~$ sudo -Es
pc ~# fsck.vfat /dev/sdb1
pc ~# fsck.ext4 -f /dev/sdb2
pc ~# mkdir /mnt/sdb2
pc ~# mount /dev/sdb2 /mnt/sdb2
pc ~# mount /dev/sdb1 /mnt/sdb2/boot
pc ~# tar -cvzf raspios-buster.tar.gz -C /mnt/sdb2 -V &quot;Backup of the Raspberry Pi OS Buster with Desktop&quot; ./ # last characters are dot and slash
pc ~# umount -R /mnt/sdb2
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>If you like you can test the backup before overwriting the SD Card:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>pc ~# tar -tvf raspios-buster.tar.gz
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Partition the SD Card, create LVM volumes and format them. You are free to use sizes what you like.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span># partition the SD Card
pc ~# parted /dev/sdb mktable msdos
pc ~# parted /dev/sdb mkpart primary fat32 2048s 257MiB
pc ~# parted /dev/sdb mkpart primary ext4 257MiB 100%
pc ~# parted /dev/sdb set 2 lvm on

# Create volumes
pc ~# pvcreate /dev/sdb2         # define physical volume
pc ~# vgcreate rpi.vg /dev/sdb2  # create volume group using physical volume
pc ~# lvcreate rpi.vg --name root.lv --size 6GiB  # create logical volume in volume group

# Format the volumes and mount them
pc ~# mkfs.vfat -F 32 -n BOOT /dev/sdb1
pc ~# mkfs.ext4 -L rootfs /dev/mapper/rpi.vg-root.lv
pc ~# mount /dev/mapper/rpi.vg-root.lv /mnt/sdb2
pc ~# mkdir /mnt/sdb2/boot
pc ~# mount /dev/sdb1 /mnt/sdb2/boot
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Now we restore the Raspberry Pi OS into the new volumes:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>pc ~# tar -xvf raspios-buster.tar.gz -C /mnt/sdb2
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Change device names in <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>boot/cmdline.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code> and in <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>etc/fstab<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code> because they have changed. Set them to <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>/dev/mmcblk0p1<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> and to <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>/dev/mapper/rpi.vg-root.lv<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em>:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>pc ~# sed -i 's/root=PARTUUID=[a-z0-9]*-02/root=/dev/mapper/rpi.vg-root.lv/' /mnt/sdb2/boot/cmdline.txt
pc ~# sed -i 's/^PARTUUID=[a-z0-9]*-01//dev/mmcblk0p1/' /mnt/sdb2/etc/fstab
pc ~# sed -i 's/^PARTUUID=[a-z0-9]*-02//dev/mapper/rpi.vg-root.lv/' /mnt/sdb2/etc/fstab
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Clean up<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>pc ~# umount -R /mnt/sdb2
pc ~# fsck.vfat /dev/sdb1
pc ~# fsck.ext4 -f /dev/mapper/rpi.vg-root.lv
pc ~# rmdir /mnt/sdb2
pc ~# exit
pc ~$
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<h2 style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-size:15px;margin-bottom:0.7em;margin-top:1.667em;font-weight:bold;"><span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span><br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>Take snapshots and backups<span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span></h2>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Now put the SD Card into the RasPi, boot and login. Everything should be the same as before but we can use the <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>L<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong>ogical <strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>V<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong>olume <strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>M<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong>anager<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em>. Look at <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>man lvm<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code> what's available.  You can make your first snapshot from this base installation so you can always revert to it:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo lvcreate --snapshot --name rpi_base --size 6GiB rpi.vg/root.lv
rpi ~$ sudo lvs
LV       VG       Attr       LSize Pool Origin  Data%  Meta%  Move Log Cpy%Sync Convert
root.lv  rpi.vg   owi-aos--- 6.00g
rpi_base rpi.vg   swi-a-s--- 6.00g      root.lv 0.01
rpi ~$
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Revert and remove(!) snapshot. You should create it afterwards immediately again.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo lvconvert --merge rpi.vg/rpi_base
rpi ~$ sudo systemctl reboot
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Be patient! It may take some time, about some minutes. Never switch off your RasPi.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Login and immediately create the snapshot again:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo lvcreate --snapshot --name rpi_base --size 6GiB rpi.vg/root.lv
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>To commit simply delete the snapshot:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo lvremove rpi.vg/rpi_base
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>To make a backup:<br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>
simply make a snapshot, mount it and backup it, e.g. with the base installation. You can use what ever backup tool you like.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo mount /dev/mapper/rpi.vg-rpi_base /mnt/
rpi ~$ tar -czf - -C /mnt/ ./ | ssh backup-server dd of=raspi.tar.gz bs=10k
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>To boot into the snapshot:<br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>
Modify <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>/boot/cmdline.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> and <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>/etc/fstab<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> and change the entries:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/dev/mapper/rpi.vg-root.lv
to
/dev/mapper/rpi.vg-rpi_base
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Then boot the RasPi. In case you have destroid your working system then you can revert it to the snapshot with:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ sudo lvconvert --merge rpi.vg/rpi_base
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>Before rebooting don't forget to change <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>/boot/cmdline.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> back to <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>root=/dev/mapper/rpi.vg-root.lv<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>. Also revert the entry in <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/etc/fstab<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<h2 style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-size:15px;margin-bottom:0.7em;margin-top:1.667em;font-weight:bold;"><span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span><br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>Don't forget<span style="font-style:inherit;font-variant:inherit;font-weight:bold;line-height:inherit;font-family:inherit;font-size:15px;box-sizing:inherit;"></span></h2>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>For future mounts of the SD Card on your PC don't forget to use:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>pc ~$ sudo mount /dev/mapper/rpi.vg-root.lv /mnt/sdb2
pc ~$ sudo mount /dev/sdb1 /mnt/sdb2/boot
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>And don't forget to update the <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>initramfs<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em> when you have made driver updates, for example:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<pre style="box-sizing:inherit;width:auto;max-height:600px;overflow:auto;background-color:rgba(0, 0, 0, 0);border-radius:0px;scrollbar-color:auto;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;overflow-wrap:normal;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><code style="box-sizing:inherit;background-color:transparent;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>rpi ~$ ls /lib/modules/
4.19.97+  4.19.97-v7+  4.19.97-v7l+  4.19.97-v8+
rpi ~$ sudo mkinitramfs -o /boot/initrd.img-4.19.97-v7+ 4.19.97-v7+
rpi ~$ sudo mkinitramfs -o /boot/initrd.img-4.19.97-v7l+ 4.19.97-v7l+
<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></pre>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:16.5px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>If the version changed then you must also update the entries in <code style="box-sizing:inherit;background-color:rgba(0, 0, 0, 0);margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;vertical-align:baseline;font-family:serif;font-size:15px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span>/boot/config.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:serif;font-size:15px;box-sizing:inherit;"></span></code>, otherwise the bootloader will not find the renamed kernel and boot stucks. Don't worry. You can attach the SD Card to your PC, mount it and correct <em style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>config.txt<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></em>.<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
<p style="box-sizing:inherit;clear:both;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;margin-bottom:0px;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span><br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span><strong style="box-sizing:inherit;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span>references:<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></strong><br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>
[1] <a href="https://raspberrypi.stackexchange.com/q/7159/79866" style="box-sizing:inherit;user-select:auto;color:rgb(17, 146, 148);cursor:pointer;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;text-decoration:underline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span>Can the raspberry boot to an LVM root partition?<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span></a><br style="box-sizing:inherit;"/><span style="box-sizing:inherit;"></span><span style="box-sizing:inherit;"></span>
[2] <a href="https://raspberrypi.stackexchange.com/a/5492/79866" style="box-sizing:inherit;user-select:auto;color:rgb(17, 146, 148);cursor:pointer;margin:0px;padding:0px;border:0px none;font-style:inherit;font-variant:inherit;font-weight:inherit;font-stretch:inherit;line-height:inherit;font-family:inherit;font-size-adjust:inherit;font-kerning:inherit;font-optical-sizing:inherit;font-language-override:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;vertical-align:baseline;text-decoration:underline;"><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span>Can a Raspberry Pi be used to create a backup of itself?<span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;color:rgb(17, 146, 148);cursor:pointer;box-sizing:inherit;"></span></a><span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:inherit;font-family:inherit;font-size:100%;box-sizing:inherit;"></span></p>
    <span style="font-style:inherit;font-variant:inherit;font-weight:inherit;line-height:22.5px;font-family:serif;font-size:15px;box-sizing:inherit;"></span></div></div></div></div></div></div></div></div></div></div></div></div></div>
</div>
</span>
</div></body></html> 